# Отступ исходного кода
## Настроики

### Отступы без жесткой табуляции

Для отступа без табуляции, принцип состоит в том, чтобы установить `'expandtab'` и установить для `'shiftwidth'` и `'softtabstop'` одно и то же значение, оставляя для `'tabstop'` значение по умолчанию:

```vim
set expandtab
set shiftwidth=2
set softtabstop=2
```

Эти настройки приведут к использованию пробелов для всех отступов.

### Отступы чисто с жесткой табуляцией

Для отступов только с жесткой табуляцией принцип состоит в том, чтобы установить для `'tabstop'` и `'shiftwidth'` одно и то же значение и оставить для `'expandtab'` значение по умолчанию (`'noexpandtab'`) и оставить `'softtabstop'` не установленным:

```vim
set shiftwidth=2
set tabstop=2
```

Эти настройки приведут к использованию жесткой табуляции для всех отступов.

### Отступы со смешанными табуляциями и пробелами

Для отступов со смешанными табуляциями и пробелами принцип состоит в том, чтобы установить для `'shiftwidth'` и`' softtabstop'` одно и то же значение, оставив для `'expandtab'` значение по умолчанию (`'noexpandtab'`). Обычно `'tabstop'` остается со значением по умолчанию:

```vim
set shiftwidth=2
set softtabstop=2
```

Эти настройки приведут к тому, что для отступов будет использовано как можно больше жесткой табуляции, а для заполнения останков будут использованы пробелы. Если вы хотите различить «отступ» и «выравнивание», т.е. Количество жесткой табуляции равно уровню отступа, используйте [Smart Tabs](https://vim.fandom.com/wiki/VimTip1626 "VimTip1626") плагин.

### Объяснение настроек

Различные варианты отступов в Vim являются бесконечным источником горя и растерянности для новых пользователей. Существует множество примеров [vimrcs](https://vim.fandom.com/wiki/Vimrc "Vimrc"), которые расскажут вам, как их правильно настроить. Чаще всего они ошибаются. Пусть `:help` будет вашим справочным материалом, а эта страница будет вашим руководством по параметрам отступов Vim.

* ['tabstop'](http://vimdoc.sourceforge.net/cgi-bin/help?tag=%27tabstop%27) изменяет ширину символа `TAB`, просто и понятно.
* ['softtabstop'](http://vimdoc.sourceforge.net/cgi-bin/help?tag=%27softtabstop%27) влияет на то, что происходит при нажатии клавиш `<TAB>` или `<BS>`. Его значение по умолчанию совпадает со значением `'tabstop'`, но при использовании отступа без жестких вкладок или смешанного отступа вы хотите установить для него то же значение, что и для `'shiftwidth'`. Если `'expandtab'` не установлено и `'tabstop'` отличается от `'softtabstop'`, клавиша `<TAB>` минимизирует количество вставляемых пробелов, используя кратные символы `TAB`. Например, если `'tabstop'` равно 8, а количество вставленных последовательных пробелов равно 20, будут использованы два символа `TAB` и четыре пробела.
* ['shiftwidth'](http://vimdoc.sourceforge.net/cgi-bin/help?tag=%27shiftwidth%27) влияет на то, что происходит, когда вы нажимаете `>>`, `<<` или `==`. Это также влияет на работу автоматического отступа. (Увидеть ниже.)
*  ['expandtab'](http://vimdoc.sourceforge.net/cgi-bin/help?tag=%27expandtab%27) влияет на то, что происходит, когда вы нажимаете клавишу `<TAB>`. Если установлен параметр `'expandtab'`, то при нажатии клавиши `<TAB>` всегда будет вставлено количество пробелов в символе softtabstop. В противном случае количество вставленных пробелов минимизируется с помощью символов `TAB`.
*  ['smarttab'](http://vimdoc.sourceforge.net/cgi-bin/help?tag=%27smarttab%27) влияет на то, как интерпретируются нажатия клавиш `<TAB>` в зависимости от того, где находится курсор. Если `'smarttab'` включен, клавиша `<TAB>` вставляет отступ в соответствии с `'shiftwidth'` в начале строки, тогда как `'tabstop'` и `'softtabstop'` используются в других местах. Редко нужно устанавливать эту опцию, если только нет необходимости использовать жесткие символы `TAB` в основном тексте или коде.

### Соображения

Использование значения `'tabstop'`, отличного от значения по умолчанию (8 пробелов), приведет к тому, что ваш файл будет иметь другой вид при использовании таких инструментов, как `cat` (`type` в Windows), которые не могут использовать настраиваемую ширину символ табуляции. С другой стороны, использование жестких вкладок для отступа позволяет другим просматривать ваш код с тем количеством отступов, которое они предпочитают. Какие из этих соображений должны иметь приоритет, зависит от личных предпочтений (и политики компании).

## Методы автоматического отступа

В Vim есть несколько методов, позволяющих автоматически делать отступы, начиная от довольно «глупых» и ненавязчивых, таких как «autoindent» и «smartindent», до сложных, таких как «cindent» и пользовательские отступы, основанные на типе файла, используя `'indentexpr'`. Количество отступов, используемых для одного уровня, контролируется опцией `'shiftwidth'`. (См. Выше.)

### 'autoindent'

`'autoindent'` не делает ничего, кроме копирования отступа из предыдущей строки при запуске новой строки. Это может быть полезно для структурированных текстовых файлов или когда вы хотите контролировать большую часть отступов вручную, без вмешательства Vim.

 `'autoindent'` не мешает другим настройкам отступов, а некоторые сценарии отступов на основе типов файлов даже включают его автоматически.

### 'smartindent' and 'cindent'

 `'smartindent'` automatically inserts one extra level of indentation in some cases, and works for C-like files. `'cindent'` is more customizable, but also more strict when it comes to syntax.

 `'smartindent'` and `'cindent'` might interfere with file type based indentation, and should never be used in conjunction with it.

When it comes to C and C++, file type based indentations automatically sets `'cindent'` , and for that reason, there is no need to set `'cindent'` manually for such files. In these cases, the `'cinwords'` , `'cinkeys'` and `'cinoptions'` options still apply.

Generally, `'smartindent'` or `'cindent'` should only be set manually if you're not satisfied with how file type based indentation works.

### File type based indentation

This type of indentation is the most flexible, as it allows users to customize indentation per file type. You enable this type of automatic indentation with the following command:  `filetype plugin indent on`  . This command will use indentation scripts located in the `indent` folder of your vim installation.

For instance, the indentation scripts for C and C++ file types properly set the `'cindent'` option, and there are very competent indentation scripts for Ruby, Perl and many other languages and file types. File type based indentation even works correctly with `Makefile` s without interference!

If you plan on using file type based indentation, don't set `'smartindent'` or `'cindent'` . You may still set `'autoindent'` , since it doesn't interfere.

The `vimrc_example.vim` that ships with Vim enables filetype based indentation:

```vim
if has("autocmd")
  " Enable file type detection.
  " Use the default filetype settings, so that mail gets 'tw' set to 72,
  " 'cindent' is on in C files, etc.
  " Also load indent files, to automatically do language-dependent indenting.
  filetype plugin indent on
  " ...
endif
```

## Different settings for different file types

You may want indentation for html files to use tabs with 2-columns per indent, while Python files use spaces with 4-columns per indent. To apply suitable settings automatically, first enable file type detection with the following in your[vimrc](https://vim.fandom.com/wiki/Vimrc "Vimrc"):

```vim
filetype plugin indent on
```

Create file `html.vim` with contents:

```vim
setlocal shiftwidth=2
setlocal tabstop=2
```

and file `python.vim` with contents:

```vim
setlocal expandtab
setlocal shiftwidth=4
setlocal softtabstop=4
```

The `html.vim` and `python.vim` files should be in this directory (which you may need to create):

*    `~/.vim/after/ftplugin` on Unix-based systems; or
*    `$HOME/vimfiles/after/ftplugin` on Windows systems

The standard plugins probably do not change settings such as `shiftwidth` , and in that case the directory `~/.vim/ftplugin` (or `$HOME/vimfiles/ftplugin` ) would work as an alternative. However the "after" directory should be used because you intend to override settings from other plugins.

Using the "after" directory as above is recommended, but it is possible to put commands such as the following in your [vimrc](https://vim.fandom.com/wiki/Vimrc "Vimrc") as an alternative:

```vim
autocmd FileType html setlocal shiftwidth=2 tabstop=2
autocmd FileType python setlocal expandtab shiftwidth=4 softtabstop=4
```





**********
[vim](/tags/vim.md)
