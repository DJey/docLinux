# Логирование вывода консоли
## Вариант 1

### Команда script

script makes a typescript of everything printed on your terminal. It is useful for users who need a hardcopy record of an interactive session as proof of work done, as the typescript file can be printed out later with lpr. If the file argument is given, script saves all dialogue in file. If no file name is given, the typescript is saved in a file named typescript.

```
script [-a] [-c command] [-e] [-f] [-q] [-t[=file]] [-V] [-h] [file]
```

### Примеры использования

#### Сохрнение вывода в файл myfile.txt

```bash
script myfile.txt
...
exit # or when Ctrl-D
```

#### Сохранение вывода ps -ax в файл /tmp/processes.txt

```bash
script -c "ps ax" /tmp/processes.txt
```

## Вариант 2

```bash
#!/bin/bash
exec 3>&1 4>&2
trap 'exec 2>&4 1>&3' 0 1 2 3
exec 1>log.out 2>&1
...
```

### Everything below will go to the file 'log.out'

Explanation:

```bash
exec 3>&1 4>&2
```

Saves file descriptors so they can be restored to whatever they were before redirection or used themselves to output to whatever they were before the following redirect.

```bash
trap 'exec 2>&4 1>&3' 0 1 2 3
```

Restore file descriptors for particular signals. Not generally necessary since they should be restored when the sub-shell exits.

```bash
exec 1>log.out 2>&1
```

Redirect stdout to file log.out then redirect stderr to stdout. Note that the order is important when you want them going to the same file. stdout must be redirected before stderr is redirected to stdout.


**********
[bash](/tags/bash.md)
